I"<p><a href="https://github.com/louishwh/java-utils.git">【代码】</a></p>

<h3 id="需求说明">需求说明</h3>
<ul>
  <li>服务端有个需求对IP作限制
    <ul>
      <li>大陆IP放过</li>
      <li>香港IP增加认证</li>
      <li>美国IP不能认证</li>
    </ul>
  </li>
</ul>

<p>###</p>
<ul>
  <li>对这个问题的思考
    <ul>
      <li>方案一
        <ul>
          <li>在Nginx处处理，将地址放入Header处理
      1. 一个IP一个地址不现实</li>
          <li>这个数据量太大了
      2. 应该是网段-供应商</li>
          <li>通过供应商查询地址</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>实际的解决方案
    <ol>
      <li>GeoIP2 GeoLite2开源免费的数据库
        <ul>
          <li>https://www.maxmind.com/en/accounts/467533/geoip/downloads</li>
        </ul>
      </li>
      <li>通过纯真库
        <ul>
          <li>https://www.cz88.net/</li>
          <li></li>
        </ul>
      </li>
      <li>通过一些IP网站的接口
        <ul>
          <li>比如：https://www.ip138.com/iplookup.asp?ip=122.196.203.216&amp;action=2</li>
          <li>比如：https://tool.lu/ip/</li>
          <li>比如：https://ip.tool.chinaz.com/27.46.106.39</li>
        </ul>
      </li>
    </ol>
  </li>
</ul>

<h3 id="总结">总结</h3>

<ol>
  <li>这个数据库需要经常更新才比较准确
    <ul>
      <li>因为运营商的网段会变</li>
    </ul>
  </li>
</ol>
:ET