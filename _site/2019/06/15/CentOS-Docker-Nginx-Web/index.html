<!DOCTYPE html>
<html>

  <head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>CentOS:Docker:Nginx-Webäººç åˆä¸€</title>

	<link rel="shortcut icon" href="/styles/images/favicon.png">
	<link rel="icon" href="/styles/images/favicon.png">

	<link rel="stylesheet" href="/styles/css/index.css">
	<link rel="stylesheet" href="/styles/css/fontawesome/css/font-awesome.min.css">
	<link rel="stylesheet" href="/styles/css/syntax.css">
	<link rel="canonical" href="/2019/06/15/CentOS-Docker-Nginx-Web/">
	<link rel="alternate" type="application/rss+xml" title="äººç åˆä¸€" href="/feed.xml">
	
	<meta name="keywords" content="CentOS:Docker:Nginx-Web, äººç åˆä¸€, ">
	<meta name="description" content="">

	<!-- <script src="/styles/js/jquery.min.js"></script> -->
	<!--[if lt IE 9]>
    	<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  	<![endif]-->
<!--   	<script>
		var _hmt = _hmt || [];
		(function() {
		  var hm = document.createElement("script");
		  hm.src = "//hm.baidu.com/hm.js?";
		  var s = document.getElementsByTagName("script")[0]; 
		  s.parentNode.insertBefore(hm, s);
		})();
	</script> -->
  	<style type="text/css">
	  	.docs-content{
	  		margin-bottom: 10px;
	  	}
  	</style>
</head>

  <body class="index">

    <header class="navbar navbar-inverse navbar-fixed-top docs-nav" role="banner">
  <div class="container">

    <div class="navbar-header">
      <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".bs-navbar-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      
     <!--  <a href="/" class="navbar-brand">
        <img src="/styles/images/logo.png">
      </a> -->

    </div>

    <nav class="collapse navbar-collapse bs-navbar-collapse" role="navigation">
      <ul class="nav navbar-nav">    
         <li>
          <a href="https://github.com/louishwh/" target="_blank">å¤œå¢¨æ— ç–†</a>
        </li>
        
        <li>
          <a href="/">æŠ€æœ¯</a>
        </li>

         <li>
          <a href="/sources">äº¤æ˜“</a>
        </li>

        <!-- <li>
          <a href="/page/categories/">åˆ†ç±»</a>
        </li>
        
        <li>
          <a href="/page/tag">ç´¢å¼•</a>
        </li>
        
        <li>
          <a href="/page/level">åˆ†çº§</a>
        </li> -->

        <li>
          <a rel="nofollow" href="/books">è¯»ä¹¦</a>
        </li>

      </ul>

<!--       <ul class="nav navbar-nav navbar-right">
        <li>
            <a><span id="busuanzi_container_site_pv">æ€»è®¿é—®é‡<span id="busuanzi_value_site_pv"></span>æ¬¡</span></a>
        </li>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">å…³äº<b class="caret"></b></a>
          <ul class="dropdown-menu">
            <li><a rel="nofollow" target="_blank" href="https://github.com/louishwh">Github</a></li>
            <li><a rel="nofollow" target="_blank" href="">å…³äºä½œè€…</a></li>
            <li><a rel="nofollow" href="/books">æˆ‘çš„ä¹¦å•</a></li>
            <li class="divider"></li>
            <li><a rel="nofollow" target="_blank" href="https://github.com/luoyan35714/LessOrMore.git">æœ¬é¡¹ç›®</a></li>
          </ul>
        </li>
      </ul> -->


    </nav>
  </div>
</header>
    <!-- <div class="docs-header" id="content"> -->
  <!-- <div class="container"> -->
  	<!--  -->
  		<!-- 
		    <h1>CentOS:Docker:Nginx-Web</h1>
		    <p>Post on Jun 15, 2019 by <a href="/about">louis han</a></p>
		 -->
		    <!-- <h1>çŸ¥è¡Œåˆä¸€</h1> -->
    <!--  -->
  <!-- </div> -->
<!-- </div> -->
    
      <!-- 
<div class="banner">
  <div class="container">
  	
    	<a href="/categories/#ã€è¿ç»´ã€‘-ref">ã€è¿ç»´ã€‘</a>	/
    	<a href="/tag/#ã€Dockerã€‘-ref">ã€Dockerã€‘</a>
    
  </div>
</div> -->

    

    <div class="container docs-container">
  <div class="row">
    <div class="col-md-3">
      <div class="sidebar hidden-print" role="complementary">
        <div id="navigation">
  <h2>ç›®å½•</h2>
  <ul class="nav sidenav">
  </ul>
  <div style="height: 200px;width: 150px;">
    <!-- script type="text/javascript" src="//rf.revolvermaps.com/0/0/8.js?i=&amp;m=0&amp;c=ff0000&amp;cr1=ffffff&amp;f=arial&amp;l=33" async="async"> 
    <!-- </script>  -->

  </div>
</div>

 
      </div>
    </div>
    
    <div class="col-md-9" role="main">
      <div class="panel docs-content">
        <div class="wrapper">
            <header class="post-header">
              <h1 class="post-title">CentOS:Docker:Nginx-Web</h1>
              <!--
                <p class="post-meta">Jun 15, 2019</p>
              -->
              <div class="meta"> <span class="postdate">2019-06-15-(6)-PM:166</span>  
                <!-- <a target="_blank" href="http://localhost:4000">louis han</a> -->
              </div>
              <br />
            </header>
            <article class="post-content">
              <h3 id="é—®é¢˜å®šä½">é—®é¢˜å®šä½</h3>

<h4 id="é—®é¢˜æè¿°">é—®é¢˜æè¿°ï¼š</h4>
<ol>
  <li>æœ€è¿‘éƒ¨é—¨éƒ¨é—¨å„ä¸ªç³»ç»Ÿçš„URLåˆæ›´æ–°äº†ï¼ŒåŸæœ¬æµè§ˆå™¨å°±å·²ç»å­˜çš„åœ°å€åºŸé™¤äº†ã€‚</li>
  <li>æ‰€æœ‰äººçš„åœ°å€éƒ½è¦æ›´æ–°åœ°å€ï¼šäº§å“ã€å‰ç«¯ã€åç«¯ã€‚</li>
</ol>

<h4 id="è§£å†³æ–¹æ¡ˆ">è§£å†³æ–¹æ¡ˆï¼š</h4>
<ol>
  <li>æ­å»ºä¸€ä¸ªå°ç½‘ç«™ï¼šåŒ…å«éœ€è¦çš„ç½‘å€(URLèµ„æºä¸­å¿ƒ)</li>
  <li>é…ç½®ç®€å•çš„åŸŸå</li>
  <li>æ›´æ–°éƒ¨ç½²æ–¹ä¾¿</li>
</ol>

<h4 id="éœ€è¦èµ„æº">éœ€è¦èµ„æºï¼š</h4>
<ol>
  <li>å‰ç«¯å°ä¼™ä¸€æšï¼ˆè‡ªå·±ä¸æƒ³å†™å‰ç«¯ç•Œé¢ï¼‰</li>
  <li>æœåŠ¡å™¨ä¸€å°ï¼ˆå¯ä»¥è¦ä¸€å°äº‘ä¸»æœºï¼‰</li>
  <li>åŸŸåä¸€æšï¼ˆå†…ç½‘çš„DNSï¼‰</li>
</ol>

<h3 id="æµç¨‹è§£æ">æµç¨‹è§£æ</h3>

<h4 id="æ•´ä½“æµç¨‹">æ•´ä½“æµç¨‹</h4>
<ol>
  <li>ç»™å‰ç«¯å°ä¼™è¯´äº†ç›®çš„ï¼ˆä»–ä¹Ÿå¾ˆæ”¯æŒï¼‰</li>
  <li>å¤§è‡´ç”»äº†ç®€å•çš„è‰å›¾ï¼ˆç®€å•è‰ç¨¿é‚£ç§ï¼‰</li>
  <li>ä»–æå®šäº†ç•Œé¢ï¼šå¤§æ¦‚20åˆ†é’Ÿï¼šä¸»è¦æ˜¯æ‰¾URLèŠ±äº†è¾ƒå¤šæ—¶é—´</li>
  <li>è‡ªå·±ä¸Šä¼ åˆ°å…¬å¼€çš„giteeä»“åº“</li>
  <li>æˆ‘æ‰¾æå­è¦æœåŠ¡å™¨ï¼š10åˆ†é’Ÿ</li>
  <li>å®‰è£…Docker</li>
  <li>æ‹‰Nginxé•œåƒ</li>
  <li>å¯åŠ¨å®¹å™¨ï¼šæŒ‚è½½æ–‡ä»¶</li>
  <li>æ’æŸ¥Server 500çš„é”™è¯¯(dockerè£…vim)</li>
  <li>æ„‰å¿«çš„æˆåŠŸäº†ï¼Œå°ä¼™ä¼´ä»¬åˆ†äº«ğŸ˜Š</li>
</ol>

<p><br /></p>
<h4 id="å‰ç«¯ç•Œé¢vuejs">å‰ç«¯ç•Œé¢ï¼ˆVue.jsï¼‰</h4>
<p>è¿™ä¸ªæ²¡å­¦è¿‡ï¼Œä¼°è®¡ä¸éš¾ï¼Œæœ€è¿‘ä¼˜å…ˆå­¦åç«¯æ¶æ„ã€‚</p>

<p><br /></p>
<h4 id="å®‰è£…dockercentos">å®‰è£…Dockerï¼ˆCentOSï¼‰</h4>
<p>ç½‘ä¸Šæ‰¾åˆ°äº†è¿™ä¸ª<a href="https://www.cnblogs.com/yufeng218/p/8370670.html">æ•™ç¨‹å¾ˆä¸é”™ğŸ‘</a></p>

<ol>
  <li>æŸ¥çœ‹å†…æ ¸ç‰ˆæœ¬ï¼ˆå†…æ ¸ç‰ˆæœ¬&gt;3.10ï¼‰ï¼š
    <blockquote>
      <p>uname -r</p>
    </blockquote>
  </li>
  <li>æ›´æ–°yumåŒ…(rootæƒé™)ï¼š
    <blockquote>
      <p>sudo yum update</p>
    </blockquote>
  </li>
  <li>å¸è½½æ—§ç‰ˆæœ¬ï¼ˆå¯é€‰ï¼‰ï¼š
    <blockquote>
      <p>sudo yum remove docker  docker-common docker-selinux docker-engine</p>
    </blockquote>
  </li>
  <li>å®‰è£…éœ€è¦çš„è½¯ä»¶åŒ…ï¼ˆyum-utilæä¾›yum-config-manageråŠŸèƒ½ï¼Œå¦å¤–ä¸¤ä¸ªæ˜¯devicemapperé©±åŠ¨ä¾èµ–çš„ï¼‰
    <blockquote>
      <p>sudo yum install -y yum-utils device-mapper-persistent-data lvm2</p>
    </blockquote>
  </li>
  <li>è®¾ç½®yumæº
    <blockquote>
      <p>sudo yum-config-manager -â€Œ-add-repo https://download.docker.com/linux/centos/docker-ce.repo</p>
    </blockquote>
  </li>
  <li>æŸ¥çœ‹æ‰€æœ‰ä»“åº“ä¸­æ‰€æœ‰dockerç‰ˆæœ¬ï¼Œå¹¶é€‰æ‹©ç‰¹å®šç‰ˆæœ¬å®‰è£…
    <blockquote>
      <p>yum list docker-ce -â€Œ-showduplicates</p>
    </blockquote>
  </li>
  <li>å®‰è£…docker
    <blockquote>
      <p>sudo yum install docker-ce  # repoä¸­é»˜è®¤åªå¼€å¯stableä»“åº“ï¼Œæ•…è¿™é‡Œå®‰è£…çš„æ˜¯æœ€æ–°ç¨³å®šç‰ˆ17.12.0</p>

      <p>sudo yum install <FQPN>  # ä¾‹å¦‚ï¼šsudo yum install docker-ce-17.12.0.ce</FQPN></p>
    </blockquote>
  </li>
  <li>å¯åŠ¨å¹¶åŠ å…¥å¼€æœºå¯åŠ¨
    <blockquote>
      <p>sudo systemctl start docker</p>

      <p>sudo systemctl enable docker</p>
    </blockquote>
  </li>
  <li>éªŒè¯å®‰è£…æ˜¯å¦æˆåŠŸ(æœ‰clientå’Œserviceä¸¤éƒ¨åˆ†è¡¨ç¤ºdockerå®‰è£…å¯åŠ¨éƒ½æˆåŠŸäº†)
    <blockquote>
      <p>docker version</p>
    </blockquote>
  </li>
</ol>

<p><br /></p>
<h4 id="dockeræ‹‰å–nginxé•œåƒé…ç½®nginx">Dockeræ‹‰å–Nginxé•œåƒï¼Œé…ç½®Nginx</h4>
<p>æ‰¾çš„æ•™ç¨‹ï¼Œä¸€æ­¥ä¸€æ­¥æ¥å°±èƒ½è§£å†³<a href="https://www.cnblogs.combingo1024/p/9022890.html">æ•™ç¨‹å¾ˆå…¨ï¼Œä¸è¿‡æœ‰å‘</a></p>

<ol>
  <li>æ‹‰å–é•œåƒ
    <blockquote>
      <p>docker pull nginx</p>
    </blockquote>
  </li>
  <li>åˆ›å»ºæŒ‚è½½ç›®å½•
    <blockquote>
      <p>mkdir -p /data/nginx/{conf,conf.d,html,logs}</p>
    </blockquote>
  </li>
  <li>å®‰è£…vim
    <blockquote>
      <p>yum install vim</p>
    </blockquote>
  </li>
  <li>é…ç½®æ–‡ä»¶</li>
</ol>

<blockquote>
  <h6 id="vim-dataconfnginxconf">vim /data/conf/nginx.conf</h6>

  <p>user  nginx;</p>

  <p>worker_processes  1;</p>

  <p>error_log  /var/log/nginx/error.log warn;</p>

  <p>pid        /var/run/nginx.pid;</p>

  <p>events {</p>

  <p>â€ƒâ€ƒ worker_connections  1024;</p>

  <p>}</p>

  <p>http {</p>

  <p>â€ƒâ€ƒinclude       /etc/nginx/mime.types;</p>

  <p>â€ƒâ€ƒdefault_type  application/octet-stream;</p>

  <p>â€ƒâ€ƒlog_format  main  â€˜$remote_addr - $remote_user [$time_local] â€œ$requestâ€ â€˜</p>

  <p>â€ƒâ€ƒâ€ƒâ€ƒ â€˜$status $body_bytes_sent â€œ$http_refererâ€ â€˜</p>

  <p>â€ƒâ€ƒâ€ƒâ€ƒ  â€˜â€œ$http_user_agentâ€ â€œ$http_x_forwarded_forâ€â€™;</p>

  <p>â€ƒâ€ƒ access_log  /var/log/nginx/access.log  main;</p>

  <p>â€ƒâ€ƒ sendfile        on;</p>

  <p>â€ƒâ€ƒ #tcp_nopush     on;</p>

  <p>â€ƒâ€ƒ keepalive_timeout  65;</p>

  <p>â€ƒâ€ƒ #gzip  on;</p>

  <p>â€ƒâ€ƒ include /etc/nginx/conf.d/*.conf;</p>

  <p>}</p>
</blockquote>

<blockquote>
  <h6 id="vim-dataconfnginxconf-1">vim /data/conf/nginx.conf</h6>
</blockquote>

<blockquote>
  <p>server {</p>

  <p>listen       80;</p>

  <p>server_name  localhost;</p>

  <p>location / {</p>

  <p>â€ƒâ€ƒ root   /usr/share/nginx/html;</p>

  <p>â€ƒâ€ƒ index  index.html index.htm;</p>

  <p>â€ƒâ€ƒ autoindex  on;</p>

  <p>â€ƒâ€ƒ}</p>

  <p>error_page   500 502 503 504  /50x.html;</p>

  <p>location = /50x.html {</p>

  <p>â€ƒâ€ƒ root /usr/share/nginx/html;</p>

  <p>â€ƒâ€ƒ }</p>

  <p>}</p>
</blockquote>

<h4 id="æ•´ä½“æµç¨‹-1">æ•´ä½“æµç¨‹</h4>
<p>å°†å®¹å™¨ä¸­nginxçš„80ç«¯å£æ˜ å°„åˆ°æœ¬åœ°çš„80ç«¯å£</p>

<blockquote>
  <p>docker run â€“name nginx81 -d -p 80:80</p>

  <p>â€ƒâ€ƒ -v /data/nginx/html:/usr/share/nginx/html</p>

  <p>â€ƒâ€ƒ -v /data/nginx/conf/nginx.conf:/etc/nginx/nginx.conf</p>

  <p>â€ƒâ€ƒ -v /data/nginx/logs:/var/log/nginx</p>

  <p>â€ƒâ€ƒ -v /data/nginx/conf.d:/etc/nginx/conf.d</p>

  <p>â€ƒâ€ƒ -d nginx:latest</p>

</blockquote>

<p><br /></p>
<h4 id="é—®é¢˜è§£æ">é—®é¢˜è§£æ</h4>

<ol>
  <li>nginxé…ç½®æ³¨æ„äº‹é¡¹ï¼š
    <blockquote>
      <p>nginxé…ç½®çš„èµ„æºåœ°å€å¿…é¡»æ˜¯å®¹å™¨å†…éƒ¨çš„åœ°å€ï¼Œå³æ˜ å°„çš„å†…éƒ¨åœ°å€</p>
    </blockquote>
  </li>
  <li>nginxé”™è¯¯å®šä½ï¼š
    <blockquote>
      <p>åœ¨å®¹å™¨å†…æŸ¥çœ‹é”™è¯¯æ—¥å¿—ï¼š</p>

      <p>tail -f  error.log</p>
    </blockquote>
  </li>
  <li>dockerå‘½ä»¤ï¼š
    <blockquote>
      <p>docker -p å®¿ä¸»æœºç«¯å£ï¼šå®¹å™¨å†…ç«¯å£ -v å®¿ä¸»æœºæ–‡ä»¶è·¯å¾„ï¼šå®¹å™¨æ–‡ä»¶è·¯å¾„ -d å¯åŠ¨çš„é•œåƒ</p>
    </blockquote>
  </li>
  <li>æ•´ä¸ªè¿‡ç¨‹å¤§è‡´èŠ±äº†ä¸€ä¸ªå°æ—¶ï¼š
    <blockquote>
      <p>ä¸»è¦è€—æ—¶åœ¨ï¼šnginxçš„é…ç½®é”™è¯¯å¯¼è‡´ä¸€ç›´æŠ¥500çš„é”™è¯¯(é‡å®šå‘é”™è¯¯)</p>

      <p>é—®é¢˜å®šä½ä¸æ¸…æ¥šï¼Œä¸€ç›´åœ¨çº ç»“åœ¨æŒ‚è½½æ–‡ä»¶ä¸Š(å®é™…ä¸Šæ˜¯nginxçš„é…ç½®é—®é¢˜)</p>
    </blockquote>
  </li>
</ol>


            </article>
        </div>
      </div>
    </div>
  </div>
</div>

    
    <footer class="footer" role="contentinfo">
	<div class="container">
		<p class="copyright">ç‰ˆæƒ &copy; 2018-2024 <a href=""><code>louis han  [è±«ICPå¤‡2024049809å·] </code></a>.</p>
		
	</div>
</footer>

<script src="/styles/js/jquery.min.js"></script>
<script src="/styles/js/bootstrap.min.js"></script>
<script src="/styles/js/holder.min.js"></script>
<script src="/styles/js/lessismore.js"></script>
<script src="/styles/js/application.js"></script>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>


  </body>
</html>
